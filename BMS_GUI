import sqlite3
import tkinter as tk
from tkinter import messagebox

class BookManagementApp:
    def __init__(self,master):
        self.master = master
        self.master.title("Fetch Book Details")
        self.master.geometry("400x250")

        #Labels and Entries
        tk.Label(master,text="Enter Book ID").grid(row=0,column=0,pady=10,padx=10)
        self.id_entry = tk.Entry(master)
        self.id_entry.grid(row=0,column=1)

        tk.Button(master,text="Fetch",command=self.fetch_book).grid(row=0,column=2,padx=10)

        tk.Label(master,text="Book Title").grid(row=1,column=0,pady=10)
        self.title_entry = tk.Entry(master)
        self.title_entry.grid(row=1,column=1,columnspan=2,sticky="ew")

        tk.Label(master,text="Book Author").grid(row=2,column=0,pady=10)
        self.author_entry = tk.Entry(master)
        self.author_entry.grid(row=2,column=1,columnspan=2,sticky="ew")

        tk.Label(master,text="Year Published").grid(row=3,column=0,pady=10)
        self.year_entry = tk.Entry(master)
        self.year_entry.grid(row=3,column=1,columnspan=2,sticky="ew")

        tk.Label(master,text="Book Genre").grid(row=4,column=0,pady=10)
        self.genre_entry = tk.Entry(master)
        self.genre_entry.grid(row=4,column=1,columnspan=2,sticky="ew")

    def fetch_book(self):
        book_id = self.id_entry.get().strip()
        if not book_id.isdigit():
            messagebox.showerror("Invalid Input","Please enter a valid numeric ID.")
            return
        try:
            conn = sqlite3.connect('mydb.db')
            cursor = conn.cursor()
            cursor.execute("SELECT * FROM books WHERE id=?",(int(book_id),))
            book = cursor.fetchone()
            conn.close()

            if book:
                self.title_entry.delete(0,tk.END)
                self.author_entry.delete(0, tk.END)
                self.year_entry.delete(0, tk.END)
                self.genre_entry.delete(0, tk.END)

                self.title_entry.insert(0,book[1])
                self.author_entry.insert(0, book[2])
                self.year_entry.insert(0, book[3])
                self.genre_entry.insert(0, book[4])
            else:
                messagebox.showinfo("Not Found","No book found with that ID.")
        except Exception as e:
            messagebox.showerror("Database Error",str(e))


#Run the GUI
root = tk.Tk()
app = BookManagementApp(root)
root.mainloop()
